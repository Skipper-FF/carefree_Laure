<div class= "container-form">
  <div class="form_wrapper">
    <%= simple_form_for @labour do |f| %>

      <%# Partie accouchement %>
      
      <div class="part1">
        <h3>Résumé de l'accouchement </h2>
        <%= f.hidden_field :patient_id  %>
        <%= f.hidden_field :category_id %>
        <%= f.input :labour_start_at, label: "Début de l'accouchement" %>
        <%= f.input :labour_start,
                    collection:Labour::LABOUR_START,
                    include_hidden: false,
                    label: 'Mode de début du travail',
                    as: :radio_buttons,
                    input_html: { class: "tag-selector" },
                    item_wrapper_class: 'tag-item' %>
        <%= f.input :artificial_labour, label: 'Motif de déclenchement artificiel', as: :select, input_html: { class: "select2" }, collection: Labour::ARTIFICIAL_LABOUR, include_hidden: false%>
        <%= f.input :labour_drugs, label: 'Moyens utilisés', as: :check_boxes, collection: Labour::LABOUR_DRUGS, include_hidden: false %>
        <%= f.input :labour_end, label: 'Délivrance', as: :select, collection: Labour::LABOUR_END, include_hidden: false %>
        <%= f.input :labour_end_at, label: "Fin de l'accouchement" %>
      </div>

      <%# Partie anésthésie %>

      <div class="part3">
       <h3> Anésthésie </h3>
        <%= f.input :anaesthesia_moment, label: 'Moment de l\'anésthésie', as: :select, collection: Labour::ANAESTHESIA_MOMENT, include_hidden: false %>
        <%= f.input :anaesthesia_category, label: 'Type d\'anésthésie', as: :select, collection: Labour::ANAESTHESIA_CATEGORY, include_hidden: false %>
        <%= f.input :anaesthesia_loco_general, label: 'Anésthésie loco-régionale',  as: :select, collection: Labour::ANAESTHESIA_LOCO_GENERAL, include_hidden: false %>
        <%= f.input :anaesthesia_general,  label: 'Anésthésie générale', as: :select, collection: Labour::ANAESTHESIA_GENERAL, include_hidden: false %>
      </div>

      <%# Partie complications %>

      <div class="part2">
        <h3> Complications </h3>
        <%= f.input :labour_complication, label: 'Complications', as: :radio_buttons, collection: ['oui', 'non'] %>
        <%= f.input :labour_complication_type, label: 'Complications de la délivrance', as: :check_boxes, collection: Labour::LABOUR_COMPLICATION_TYPE, include_hidden: false %>
        <%= f.input :labour_actes, label: 'Actes de la délivrance', as: :check_boxes, collection: Labour::LABOUR_ACTES, include_hidden: false %>
      </div>

      <%# ----------------------------- %>

      <%# Partie bébé %>

      <div class="part4">
        <h3> Informations du bébé</h2>
          <%= f.simple_fields_for :babies do |p| %>
            <%= p.input :first_name, label: "Prénom" %>
            <%= p.input :last_name,  label: "Nom de Famille" %>
            <%= p.input :sex, as: :select, collection: Baby::SEX ,label: "Sexe"  %>
            <%= p.input :birth_date,  label: "Date et heure de naissance" %>
            <%= p.input :weight,  label: "Poids (kg)"  %>
            <%= p.input :heigh,  label: "Taille (cm)"  %>
            <%= p.input :head_circumference,  label: "Périmètre crânien (cm)"%>

            <%# Partie monitoring %>
            <%= p.input :monitoring,  label: "Monitorage", as: :radio_buttons, collection: ['oui', 'non'] %>
            <%= p.input :monitoring_options, collection: Baby::MONITORINGOPTIONS, as: :check_boxes, label: "Types de monitorage", input_html: { multiple: true }, include_hidden: false  %>

            <%# Partie réanimation %>
            <%= p.input :intensivecare,  label: "Réanimation", as: :radio_buttons, collection: ['oui', 'non'] %>
            <%= p.input :intensivecare_options, collection: Baby::INTENSIVECAREOPTIONS, as: :check_boxes, label: "Actes de réanimation", input_html: { multiple: true }, include_hidden: false  %>

            <%# Partie infections %>
            <%= p.input :infectiouscontext,  label: "Infections", as: :radio_buttons, collection: ['oui', 'non']  %>
            <%= p.input :infectiouscontext_options, collection: Baby::INFECTIOUSCONTEXTOPTIONS, as: :check_boxes, label: "Types d'infections", input_html: { multiple: true }, include_hidden: false  %>

            <%# Partie pathologies %>
            <%= p.input :malformation,  label: "Malformation", as: :radio_buttons, collection: ['oui', 'non']   %>
            <%= p.input :pathologies, collection: Baby::PATHOLOGIES, as: :check_boxes, label: "Pathologies", input_html: { multiple: true }, include_hidden: false  %>

            <%# Partie sorties salle de naissance%>
            <%= p.input :breastfeeding, collection: Baby::BREASTFEEDING, label: "Allaitement", include_hidden: false  %>
            <%= p.input :exit_room, collection: Baby::EXITROOM, label: "Sortie de la salle de naissance", include_hidden: false  %>

          <% end %>
      </div>

      <%# ----------------------------- %>

      <div class="part5">
             <h2> Codes </h2>
              <%#= simple_form_for [@labour, @labour_codes ] do |f| %>
                  <%#= f.hidden_field :labour_id  %>
                  <%#= f.hidden_field :code_id %>
                  <%#= f.association :codes, as: :check_boxes, include_blank: :false, label_method: lambda { |code| "#{code.category} | #{code.name} | Prix: #{code.price}€ " } %>
                  <%#= f.submit "Enregistrer les codes", class: "btn-flat" %>
              <%# end %>
            </div>

      <div class="part6">
              <%= f.submit "Enregistrer l'accouchement", id: "btn-home" %>
            </div>
    <% end %>
  </div>
</div>
